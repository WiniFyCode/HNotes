<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Trần Đình Thành - TECHVANGUARD</title>
  <link rel="stylesheet" href="../css/sidebar.css">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet" />
</head>
<body>
  <div class="sidebar">
    <div class="tabs">
      <button class="tab-button active" data-tab="summary">
        Summary
      </button>
      <button class="tab-button" data-tab="analysis">
        Analysis
      </button>
      <button class="tab-button" data-tab="ask-ai">
        Ask AI
      </button>
      <button class="tab-button" data-tab="settings">
        Settings
      </button>
    </div>

    <div class="search-container">
      <div class="search-box">
        <input type="text" id="searchInput" placeholder="Search notes & highlights..." />
      </div>
    </div>

    <div class="filters" id="filterContainer">
      <div id="activeFilterContainer" class="active-filter-container hidden">
        <!-- Filter Chip will be injected here -->
      </div>
      <div class="search-by-grid">
        <button class="search-by-btn" data-type="website">
          <span class="material-symbols-outlined">language</span>
          Website
        </button>
        <button class="search-by-btn" data-type="date">
          <span class="material-symbols-outlined">calendar_today</span>
          Date
        </button>
        <button class="search-by-btn" data-type="color">
          <span class="material-symbols-outlined">palette</span>
          Color
        </button>
        <button class="search-by-btn" data-type="tag">
          <span class="material-symbols-outlined">label</span>
          Tag
        </button>
      </div>
    </div>

    <div id="categoryView" class="category-view hidden">
      <div class="category-header">
        <button id="backToMainBtn" class="back-btn">
          <span class="material-symbols-outlined">arrow_back</span>
        </button>
        <span id="categoryTitle" class="category-title">Select Website</span>
      </div>
      <div id="categoryList" class="category-list">
        <!-- Category items will be injected here -->
      </div>
    </div>

    <div class="content" id="content">
      <div class="tab-content active" id="summary-tab">
        <div id="highlightsList" class="highlights-list">
          <div class="empty-state">
            <p>No highlights yet</p>
            <p class="empty-subtitle">Select text on any webpage to create your first highlight</p>
          </div>
        </div>
      </div>

      <div class="tab-content" id="analysis-tab">
        <div class="ai-panel">
          <h3>AI Analysis</h3>
          <p class="ai-description">Get AI-powered insights about your highlights and notes</p>
          <button class="ai-button" id="analyzeBtn">
            Analyze All Notes
          </button>
          <div id="analysisResult" class="analysis-result"></div>
        </div>
      </div>

      <div class="tab-content" id="ask-ai-tab">
        <div class="ai-panel">
          <h3>Ask AI</h3>
          <p class="ai-description">Ask questions about your saved content</p>
          <div class="chat-container" id="chatContainer">
            <div class="chat-messages" id="chatMessages"></div>
          </div>
          <div class="chat-input-container">
            <input type="text" id="chatInput" placeholder="Ask anything about your notes..." class="chat-input" />
            <button id="sendChatBtn" class="send-button">Send</button>
          </div>
        </div>
      </div>

      <div class="tab-content" id="settings-tab">

          <div id="colorNamesSettings" class="settings-section">
            <h4>Color Names</h4>
            <p class="setting-sub">Give friendly names/labels to each highlight color.</p>
            <div id="colorNamesList" class="color-names-list">
              <!-- Color inputs injected by JS -->
            </div>
          </div>

          <hr class="settings-sep" />

          <div class="settings-section">
            <h4>Other Settings</h4>
            <p class="setting-sub">Placeholder for future settings.</p>
          </div>

      </div>
    </div>

    <button id="addPageNoteBtn" class="fab-btn" title="Add Page Note">
      <span class="material-symbols-outlined">add</span>
    </button>
  </div>

  <!-- Tag Modal -->
  <div id="tagModal" class="modal-overlay hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-container">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title">Manage Tags</h3>
          <button id="closeTagModalBtn" class="modal-close-btn" aria-label="Close">
            <span class="material-symbols-outlined">close</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="tag-input-container">
            <input type="text" id="tagInput" placeholder="Type new tag and press Enter..." class="modal-input">
          </div>
          <div class="existing-tags-label">Select existing tags:</div>
          <div id="existingTagsList" class="existing-tags-list">
            <!-- Existing tags will be injected here -->
          </div>
        </div>
        <div class="modal-footer">
          <button id="cancelTagBtn" class="modal-btn modal-btn-secondary">Cancel</button>
          <button id="saveTagsBtn" class="modal-btn modal-btn-primary">
            Save Tags
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Edit Note Modal -->
  <div id="editNoteModal" class="modal-overlay hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-container">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title">Edit Note</h3>
          <button id="closeEditNoteModalBtn" class="modal-close-btn" aria-label="Close">
            <span class="material-symbols-outlined">close</span>
          </button>
        </div>
        <div class="modal-body">
          <textarea id="editNoteInput" class="modal-textarea" placeholder="Add your note here..." rows="4"></textarea>
        </div>
        <div class="modal-footer">
          <button id="cancelEditNoteBtn" class="modal-btn modal-btn-secondary">Cancel</button>
          <button id="saveEditNoteBtn" class="modal-btn modal-btn-primary">
            Save Note
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Delete Confirm Modal -->
  <div id="deleteConfirmModal" class="modal-overlay hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-container modal-container-small">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title">Delete Highlight?</h3>
          <button id="closeDeleteModalBtn" class="modal-close-btn" aria-label="Close">
            <span class="material-symbols-outlined">close</span>
          </button>
        </div>
        <div class="modal-body">
          <p class="modal-message">Are you sure you want to delete this highlight? This action cannot be undone.</p>
        </div>
        <div class="modal-footer">
          <button id="cancelDeleteBtn" class="modal-btn modal-btn-secondary">Cancel</button>
          <button id="confirmDeleteBtn" class="modal-btn modal-btn-danger">
            Delete
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Add Page Note Modal -->
  <div id="addPageNoteModal" class="modal-overlay hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-container">
      <div class="modal-content">
        <div class="modal-header">
          <h3 class="modal-title">Add Page Note</h3>
          <button id="closeAddPageNoteModalBtn" class="modal-close-btn" aria-label="Close">
            <span class="material-symbols-outlined">close</span>
          </button>
        </div>
        <div class="modal-body">
          <textarea id="addPageNoteInput" class="modal-textarea" placeholder="Write your page note here..." rows="5"></textarea>
        </div>
        <div class="modal-footer">
          <button id="cancelAddPageNoteBtn" class="modal-btn modal-btn-secondary">Cancel</button>
          <button id="saveAddPageNoteBtn" class="modal-btn modal-btn-primary">
            Add Note
          </button>
        </div>
      </div>
    </div>
  </div>

  <script src="../js/shared.js"></script>
  <script src="../js/sidebar.js"></script>
</body>
</html>
